<!DOCTYPE html>
<html ng-app="plik">
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="StickyNotes - save and share your notes easily">
    <meta name="author" content="Mathieu Bodjikian, Charles-Antoine Mathieu">

    <title ng-bind="title"></title>

    <!-- CSS -->
    <link href="css/themes.css" rel="stylesheet" type="text/css">
    <link href="css/vendor.css" rel="stylesheet" type="text/css">
    <link href="css/app.css" rel="stylesheet" type="text/css">
    <link href="css/custom.css" rel="stylesheet" type="text/css">
    <link href="css/notes-styles.css" rel="stylesheet" type="text/css">
    <link href="css/board-view.css" rel="stylesheet" type="text/css">

    <!-- FAVICON -->
    <link rel="shortcut icon" href="favicon.ico">
</head>

<body>
<div id="view">
    <!-- HEADER -->
    <header ng-controller="MenuCtrl">
        <div class="container-fluid">
            <div class="row">
                <!-- LOGO -->
                <div class="col-sm-3 text-center">
                    <h1><a href="#/_">{{title}}</a></h1>
                    <p class="tagline">Save & share your notes securely</p>
                </div>
                <!-- TOP MENU -->
                <div class="col-sm-9 text-right hidden-xs">
                    <a ng-if="auth_button && isFeatureEnabled('authentication') && !user" href="#/login"><i class="fa fa-lock"></i> Authentication</a>
                    <a ng-if="isFeatureEnabled('authentication') && user" href="#/login">{{user.login}}</a>
                    &nbsp;
                    <a ng-if="isFeatureEnabled('authentication') && user && user.admin" href="#/admin"><i class="fa fa-wrench"></i> Admin&nbsp;</a>
                </div>
                <!-- TOP MENU ( mobile ) -->
                <div class="col-sm-9 text-center hidden-sm hidden-md hidden-lg">
                    <a ng-if="config.authentication && !user" href="#/login"><i class="fa fa-lock"></i> Authentication</a>
                    <a ng-if="config.authentication && user" href="#/login">{{user.login}}</a>
                </div>
            </div>
        </div>
    </header>

    <!-- ANGULARJS VIEW -->
    <div id="angular-view" ng-view class="container-fluid"></div>
    
    <!-- THEME TOGGLE -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fa fa-moon-o" id="theme-icon"></i>
    </div>
</div>

<!-- FOOTER -->
<footer class="footer" ng-controller="MenuCtrl">
    <div ng-if="config.abuseContact" class="container text-center">
        <p>For abuse contact {{config.abuseContact}}</p>
    </div>
</footer>

<!-- configuration -->
<script src="js/custom.js" type="text/javascript"></script>

<!-- framework, modules and libraries -->
<script src="js/vendor.js" type="text/javascript"></script>

<!-- application -->
<script src="js/app.js" type="text/javascript"></script>

<!-- sticky notes enhancements -->
<script src="js/sticky-notes.js" type="text/javascript"></script>
<script src="js/board-controller.js" type="text/javascript"></script>

<!-- Theme handling -->
<script>
    // Initialize theme based on user preference
    function initTheme() {
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (savedTheme !== 'light' && prefersDark)) {
            document.body.classList.add('dark-theme');
            document.getElementById('theme-icon').className = 'fa fa-sun-o';
        } else {
            document.body.classList.add('light-theme');
            document.getElementById('theme-icon').className = 'fa fa-moon-o';
        }
    }
    
    // Toggle between light and dark theme
    function toggleTheme() {
        if (document.body.classList.contains('dark-theme')) {
            document.body.classList.remove('dark-theme');
            document.body.classList.add('light-theme');
            localStorage.setItem('theme', 'light');
            document.getElementById('theme-icon').className = 'fa fa-moon-o';
        } else {
            document.body.classList.remove('light-theme');
            document.body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
            document.getElementById('theme-icon').className = 'fa fa-sun-o';
        }
    }
    
    // Initialize theme on page load
    document.addEventListener('DOMContentLoaded', initTheme);
</script>

</body>
</html>
